#!/usr/bin/env node

// first i want to create and require the add, list, complete and delete files.
const fs = require('fs');
const add = require('./commands/add.js');
const complete = require('./commands/complete.js');
const del = require('./commands/delete.js');
const list = require('./commands/list.js');
// then I want to create my variables from my command line arguments.
const command = process.argv[2];
const arg = process.argv[3];

const defaultData = [];

// then I want to create my fs.readFile method.
fs.readFile('./tasks.json', 'utf-8', (err, data) => {
  data = err ? defaultData : JSON.parse(data);
  switch (command) {
    case 'add': {
      add(data, arg);
      break;
    }
    case 'complete': {
      complete(data, arg);
      break;
    }
    case 'delete': {
      del(data, arg);
      break;
    }
    case 'list': {
      list(data);
      break;
    }
    default: {
      throw new Error('Invalid command!');
    }
  }
  fs.writeFile('./tasks.json', JSON.stringify(data), (error) => {
    console.log("cannot write");
  });
});
